# AI System Architecture Diagram

## Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STUDENT ASKS QUESTION                            â”‚
â”‚                     "How do I solve xÂ² + 5x + 6 = 0?"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CONTEXT BUILDER                                 â”‚
â”‚  ğŸ“š /lib/ai/context-builder.ts                                          â”‚
â”‚                                                                          â”‚
â”‚  1. Extract concepts from question                                       â”‚
â”‚     â”œâ”€ Detect: "xÂ²" â†’ quadratic equation                               â”‚
â”‚     â”œâ”€ Detect: "solve" â†’ equation solving                              â”‚
â”‚     â””â”€ Category: algebra, functions                                     â”‚
â”‚                                                                          â”‚
â”‚  2. Load relevant reference materials                                    â”‚
â”‚     â”œâ”€ Notation: function notation, equals sign                         â”‚
â”‚     â”œâ”€ Golden Words: "solution", "factor"                              â”‚
â”‚     â””â”€ Common Mistakes: (a+b)Â² â‰  aÂ² + bÂ²                              â”‚
â”‚                                                                          â”‚
â”‚  3. Stay under token limit (configurable)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REFERENCE MATERIAL INJECTION                          â”‚
â”‚                                                                          â”‚
â”‚  FROM: /data/reference/notation-table.json                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ f(x) - Function notation                      â”‚                      â”‚
â”‚  â”‚ Confused with: fÂ·x (multiplication)          â”‚                      â”‚
â”‚  â”‚ Trap: Parentheses mean function application   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  FROM: /data/reference/golden-words.json                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ "The solution is x = 5"                       â”‚                      â”‚
â”‚  â”‚ NOT: "x equals 5" or "the answer is 5"       â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  FROM: /data/reference/common-mistakes.json                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ âŒ WRONG: (x+3)Â² = xÂ² + 9                    â”‚                      â”‚
â”‚  â”‚ âœ“ CORRECT: (x+3)Â² = xÂ² + 6x + 9             â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PROMPT GENERATOR                                â”‚
â”‚  ğŸ“ /lib/ai/tutor-prompts.ts                                           â”‚
â”‚                                                                          â”‚
â”‚  Builds comprehensive system prompt:                                     â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ CORE REQUIREMENTS                            â”‚                       â”‚
â”‚  â”‚ â€¢ Zero hallucinations                        â”‚                       â”‚
â”‚  â”‚ â€¢ All claims cited                           â”‚                       â”‚
â”‚  â”‚ â€¢ No uncertain language                      â”‚                       â”‚
â”‚  â”‚ â€¢ Step-by-step verification                  â”‚                       â”‚
â”‚  â”‚ â€¢ Domain awareness                           â”‚                       â”‚
â”‚  â”‚ â€¢ Angle units specified                      â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ MODE: Socratic                               â”‚                       â”‚
â”‚  â”‚ â€¢ Ask guiding questions                      â”‚                       â”‚
â”‚  â”‚ â€¢ Don't give answers directly                â”‚                       â”‚
â”‚  â”‚ â€¢ Progressive hints (3 levels)               â”‚                       â”‚
â”‚  â”‚ â€¢ Build student confidence                   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                    OR                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ MODE: Explanation                            â”‚                       â”‚
â”‚  â”‚ â€¢ Show every step                            â”‚                       â”‚
â”‚  â”‚ â€¢ Explain the why                            â”‚                       â”‚
â”‚  â”‚ â€¢ Multiple representations                   â”‚                       â”‚
â”‚  â”‚ â€¢ Verify the answer                          â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                          â”‚
â”‚  + Reference materials from context builder                              â”‚
â”‚  + Self-verification checklist                                           â”‚
â”‚  + Examples of good vs bad responses                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CLAUDE API CALL                                 â”‚
â”‚  ğŸ¤– Anthropic Claude 3.5 Sonnet                                         â”‚
â”‚                                                                          â”‚
â”‚  Request:                                                                â”‚
â”‚  â”œâ”€ Model: claude-3-5-sonnet-20241022                                  â”‚
â”‚  â”œâ”€ System: [Generated prompt with all rules]                          â”‚
â”‚  â”œâ”€ Messages: [Conversation history + new question]                    â”‚
â”‚  â”œâ”€ Temperature: 0.2-0.3 (low for math)                                â”‚
â”‚  â””â”€ Stream: true (for real-time updates)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          STREAM HANDLER                                  â”‚
â”‚  ğŸŒŠ /lib/ai/stream-handler.ts                                          â”‚
â”‚                                                                          â”‚
â”‚  Real-time processing as response streams:                               â”‚
â”‚                                                                          â”‚
â”‚  Chunk 1: "I can see this is a quadratic..."                           â”‚
â”‚     â”œâ”€ Extract LaTeX: None yet                                          â”‚
â”‚     â”œâ”€ Extract citations: None yet                                      â”‚
â”‚     â””â”€ Update UI â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30%                                    â”‚
â”‚                                                                          â”‚
â”‚  Chunk 2: "What methods do we have? \\( x = \\frac{-b \\pm..."        â”‚
â”‚     â”œâ”€ Extract LaTeX: "\\( x = \\frac{-b \\pm...}"                     â”‚
â”‚     â”œâ”€ Extract citations: [Notation: quadratic-formula]                 â”‚
â”‚     â””â”€ Update UI â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘ 70%                                    â”‚
â”‚                                                                          â”‚
â”‚  Chunk 3: "...Let's try factoring first..."                            â”‚
â”‚     â”œâ”€ Extract LaTeX: "\\( (x+2)(x+3) = 0 \\)"                         â”‚
â”‚     â”œâ”€ Extract citations: [Term: factor]                                â”‚
â”‚     â””â”€ Update UI â”â”â”â”â”â”â”â”â”â”â”â”â” 100%                                   â”‚
â”‚                                                                          â”‚
â”‚  Final response assembled:                                               â”‚
â”‚  â”œâ”€ Content: Full text                                                  â”‚
â”‚  â”œâ”€ LaTeX: ["\\( x = \\frac{-b...}", "\\( (x+2)(x+3)... }"]           â”‚
â”‚  â””â”€ Citations: [Notation refs, Term refs]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RESPONSE VALIDATOR (Base)                          â”‚
â”‚  âœ… /lib/ai/response-validator.ts                                      â”‚
â”‚                                                                          â”‚
â”‚  Level 1: Syntax Validation                                              â”‚
â”‚  â”œâ”€ âœ“ All LaTeX syntactically valid                                    â”‚
â”‚  â”œâ”€ âœ“ No forbidden phrases detected                                    â”‚
â”‚  â”œâ”€ âœ“ No hallucination indicators                                      â”‚
â”‚  â””â”€ âœ“ Domain restrictions noted                                        â”‚
â”‚                                                                          â”‚
â”‚  Level 2: Mathematical Validation                                        â”‚
â”‚  â”œâ”€ âœ“ Algebraic steps preserve equality                                â”‚
â”‚  â”œâ”€ âœ“ Numeric claims are reasonable                                    â”‚
â”‚  â”œâ”€ âœ“ No contradictions found                                          â”‚
â”‚  â””â”€ âœ“ Consistent with conversation history                             â”‚
â”‚                                                                          â”‚
â”‚  Base Confidence: 0.92 (92%)                                            â”‚
â”‚  Risk Level: low                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ENHANCED VALIDATOR (Fact-Checking)                      â”‚
â”‚  ğŸ” /lib/ai/response-validator-enhanced.ts                             â”‚
â”‚                                                                          â”‚
â”‚  Extract Claims:                                                         â”‚
â”‚  1. "The quadratic formula is x = (-b Â± âˆš(bÂ²-4ac))/(2a)"               â”‚
â”‚  2. "This factors to (x+2)(x+3) = 0"                                   â”‚
â”‚  3. "Therefore x = -2 or x = -3"                                       â”‚
â”‚                                                                          â”‚
â”‚  Fact-Check Each Claim:                                                  â”‚
â”‚                                                                          â”‚
â”‚  Claim 1: Check notation-table.json                                     â”‚
â”‚     âœ“ Found: quadratic-formula entry                                    â”‚
â”‚     âœ“ Formula matches exactly                                           â”‚
â”‚     âœ“ Source: [Notation: quadratic-formula]                            â”‚
â”‚     Confidence: 0.95                                                     â”‚
â”‚                                                                          â”‚
â”‚  Claim 2: Verify factoring                                              â”‚
â”‚     âœ“ Expand: (x+2)(x+3) = xÂ² + 3x + 2x + 6 = xÂ² + 5x + 6             â”‚
â”‚     âœ“ Matches original equation                                         â”‚
â”‚     Confidence: 1.0                                                      â”‚
â”‚                                                                          â”‚
â”‚  Claim 3: Check solutions                                               â”‚
â”‚     âœ“ Substitute x = -2: (-2)Â² + 5(-2) + 6 = 4 - 10 + 6 = 0 âœ“         â”‚
â”‚     âœ“ Substitute x = -3: (-3)Â² + 5(-3) + 6 = 9 - 15 + 6 = 0 âœ“         â”‚
â”‚     Confidence: 1.0                                                      â”‚
â”‚                                                                          â”‚
â”‚  Check for Common Mistakes:                                              â”‚
â”‚     âœ“ Not teaching any common mistakes                                  â”‚
â”‚     âœ“ Correct notation used                                             â”‚
â”‚                                                                          â”‚
â”‚  Overall Trust Score: 94/100                                            â”‚
â”‚  Recommendation: ACCEPT âœ“                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DECISION POINT                                  â”‚
â”‚                                                                          â”‚
â”‚  Trust Score: 94/100                                                    â”‚
â”‚  Recommendation: ACCEPT                                                  â”‚
â”‚                                                                          â”‚
â”‚  Decision Logic:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Score â‰¥ 80 AND valid â†’ ACCEPT              â”‚ âœ“ THIS CASE           â”‚
â”‚  â”‚ Score 50-79 â†’ REVIEW + show                â”‚                        â”‚
â”‚  â”‚ Score < 50 â†’ REJECT + regenerate           â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SHOW TO STUDENT âœ“                                â”‚
â”‚                                                                          â”‚
â”‚  Response includes:                                                      â”‚
â”‚  â”œâ”€ Validated mathematical content                                      â”‚
â”‚  â”œâ”€ Properly formatted LaTeX                                            â”‚
â”‚  â”œâ”€ Citations to reference materials                                    â”‚
â”‚  â””â”€ Trust score logged for monitoring                                   â”‚
â”‚                                                                          â”‚
â”‚  Student sees:                                                           â”‚
â”‚  "I can see this is a quadratic equation. What methods do we have       â”‚
â”‚   for solving quadratics? [Notation: quadratic-formula]                 â”‚
â”‚                                                                          â”‚
â”‚   You mentioned this is xÂ² + 5x + 6 = 0. Let's look at the             â”‚
â”‚   coefficients - do you think this could factor nicely?                 â”‚
â”‚                                                                          â”‚
â”‚   [Guides student to discover (x+2)(x+3) = 0...]"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                        ALTERNATIVE PATH: LOW TRUST SCORE

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trust Score: 45/100                                                    â”‚
â”‚  Recommendation: REJECT                                                  â”‚
â”‚                                                                          â”‚
â”‚  Issues Found:                                                           â”‚
â”‚  âŒ CRITICAL: Teaching common mistake "sqrt-distribute"                â”‚
â”‚  âŒ Response contains: "âˆš(aÂ² + bÂ²) = a + b"                            â”‚
â”‚  âŒ Unverified claim: "This always works..."                           â”‚
â”‚                                                                          â”‚
â”‚  Action:                                                                 â”‚
â”‚  â”œâ”€ Do NOT show to student                                             â”‚
â”‚  â”œâ”€ Log error for review                                               â”‚
â”‚  â”œâ”€ Generate new response with stronger prompt                         â”‚
â”‚  â””â”€ Or escalate to human tutor                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Module Interaction Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Student Input  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Context Builder â”‚â”€â”€â”€â”€â”€â–¶â”‚ Reference Data   â”‚
â”‚                 â”‚      â”‚ â€¢ notation.json  â”‚
â”‚ â€¢ Extract       â”‚      â”‚ â€¢ golden.json    â”‚
â”‚   concepts      â”‚      â”‚ â€¢ mistakes.json  â”‚
â”‚ â€¢ Load refs     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Prompt          â”‚
â”‚ Generator       â”‚
â”‚                 â”‚
â”‚ â€¢ System prompt â”‚
â”‚ â€¢ User prompt   â”‚
â”‚ â€¢ Verification  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude API      â”‚
â”‚ (Streaming)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stream Handler  â”‚â”€â”€â”€â”€â”€â–¶â”‚ LaTeX Parser     â”‚
â”‚                 â”‚      â”‚ Citation Extract â”‚
â”‚ â€¢ Real-time     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Progressive   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Base Validator  â”‚
â”‚                 â”‚
â”‚ â€¢ Syntax        â”‚
â”‚ â€¢ Mathematics   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enhanced        â”‚â”€â”€â”€â”€â”€â–¶â”‚ Reference Data   â”‚
â”‚ Validator       â”‚      â”‚ (fact-check)     â”‚
â”‚                 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Extract claimsâ”‚
â”‚ â€¢ Fact-check    â”‚
â”‚ â€¢ Trust score   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ Accept? â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚   Yes   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show to Student â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
Problem Text
    â”‚
    â”œâ”€â–¶ "xÂ² + 5x + 6"
    â”‚
    â–¼
Concept Detection
    â”‚
    â”œâ”€â–¶ Quadratic equation
    â”œâ”€â–¶ Algebra
    â”œâ”€â–¶ Factoring
    â”‚
    â–¼
Reference Loading
    â”‚
    â”œâ”€â–¶ Notation: function, equals, quadratic-formula
    â”œâ”€â–¶ Terms: solution, factor, zero
    â”œâ”€â–¶ Mistakes: (a+b)Â² â‰  aÂ²+bÂ², canceling errors
    â”‚
    â–¼
Prompt Assembly
    â”‚
    â”œâ”€â–¶ System: Core rules + Mode + References
    â”œâ”€â–¶ User: Problem + Context
    â”‚
    â–¼
Claude Response
    â”‚
    â”œâ”€â–¶ "Let's think about methods..."
    â”‚
    â–¼
Stream Processing
    â”‚
    â”œâ”€â–¶ Extract: \\( x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a} \\)
    â”œâ”€â–¶ Extract: [Notation: quadratic-formula]
    â”‚
    â–¼
Validation
    â”‚
    â”œâ”€â–¶ LaTeX valid? âœ“
    â”œâ”€â–¶ No forbidden phrases? âœ“
    â”œâ”€â–¶ Claims verifiable? âœ“
    â”œâ”€â–¶ Not teaching mistakes? âœ“
    â”‚
    â–¼
Trust Score: 94/100
    â”‚
    â”œâ”€â–¶ Recommendation: ACCEPT
    â”‚
    â–¼
Display to Student
```

## File Dependencies

```
usage-example.ts
    â”‚
    â”œâ”€â–¶ tutor-prompts.ts
    â”‚       â””â”€â–¶ Response examples
    â”‚
    â”œâ”€â–¶ context-builder.ts
    â”‚       â”œâ”€â–¶ notation-table.json
    â”‚       â”œâ”€â–¶ golden-words.json
    â”‚       â””â”€â–¶ common-mistakes.json
    â”‚
    â”œâ”€â–¶ stream-handler.ts
    â”‚       â””â”€â–¶ @anthropic-ai/sdk
    â”‚
    â”œâ”€â–¶ response-validator.ts
    â”‚       â”œâ”€â–¶ latex-validator.ts
    â”‚       â””â”€â–¶ answer-validator.ts
    â”‚
    â””â”€â–¶ response-validator-enhanced.ts
            â””â”€â–¶ response-validator.ts
```

## Validation Decision Tree

```
                        Response Received
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Base Validation  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
              â”‚  Invalid  â”‚     â”‚  Valid   â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                    â”‚                â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”‚
              â”‚   REJECT  â”‚          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                     â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Enhanced         â”‚
                          â”‚ Fact-Checking    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚                 â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚ Trust < 50  â”‚   â”‚ Trust â‰¥ 50 â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                â”‚
                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚   REJECT  â”‚   â”‚             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
                                    â”‚             â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                          â”‚                   â”‚   â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚ Trust 50-79 â”‚     â”‚ Trust â‰¥ 80  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                    â”‚  REVIEW   â”‚       â”‚  ACCEPT   â”‚
                    â”‚  + Show   â”‚       â”‚           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Zero Hallucination Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1: Prevention (Prompt Engineering)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Explicit "no hallucination" instructions           â”‚
â”‚ â€¢ Self-verification required before response         â”‚
â”‚ â€¢ Reference materials provided in prompt             â”‚
â”‚ â€¢ Examples of good vs. bad responses                 â”‚
â”‚ â€¢ Citation requirements enforced                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 2: Detection (Pattern Matching)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Hallucination indicators: "obviously", "clearly"   â”‚
â”‚ â€¢ Uncertainty phrases: "I think", "probably"         â”‚
â”‚ â€¢ Unverified absolute claims: "always", "never"      â”‚
â”‚ â€¢ Missing citations for major claims                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 3: Verification (Fact-Checking)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Extract mathematical claims                        â”‚
â”‚ â€¢ Check against notation table                       â”‚
â”‚ â€¢ Verify against golden words                        â”‚
â”‚ â€¢ Cross-reference common mistakes                    â”‚
â”‚ â€¢ Validate with numerical examples                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 4: Scoring (Trust Calculation)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Base confidence from syntax validation             â”‚
â”‚ â€¢ Adjust for unverified claims                       â”‚
â”‚ â€¢ Penalize for teaching common mistakes              â”‚
â”‚ â€¢ Factor in citation coverage                        â”‚
â”‚ â€¢ Generate 0-100 trust score                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 5: Decision (Accept/Review/Reject)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Accept: Trust â‰¥ 80, show immediately               â”‚
â”‚ â€¢ Review: Trust 50-79, flag + show                   â”‚
â”‚ â€¢ Reject: Trust < 50, regenerate or escalate         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
